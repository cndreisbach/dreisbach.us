dist: trusty
sudo: required
git:
  depth: 10
branches:
  only:
  - master
before_install:
  - openssl aes-256-cbc -K $encrypted_da1f0619252d_key -iv $encrypted_da1f0619252d_iv -in travis_ci.enc -out /tmp/travis_ci -d
install:
  - wget -O /tmp/hugo.deb https://github.com/spf13/hugo/releases/download/v0.21/hugo_0.21_Linux-64bit.deb
  - sudo dpkg -i /tmp/hugo.deb
script:
  - hugo
before_deploy:
  - eval "$(ssh-agent -s)"
  - chmod 600 /tmp/travis_ci
  - ssh-add /tmp/travis_ci
deploy:
  provider: script
  skip_cleanup: true
  script: rsync -r --delete-after --quiet $TRAVIS_BUILD_DIR/public homebase@homebase.dreisbach.us:/var/www/static_web/
  on:
    branch: master
